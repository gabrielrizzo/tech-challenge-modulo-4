<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Challenge 4 - An√°lise Psicol√≥gica de √Åudio</title>
    <link rel="stylesheet" href="/frontend/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéôÔ∏è An√°lise Psicol√≥gica de √Åudio</h1>
            <p class="subtitle">Tech Challenge M√≥dulo 4 - FIAP</p>
            <nav style="margin-top: 15px;">
                <a href="/config" style="display: inline-block; padding: 10px 20px; background: rgba(99, 102, 241, 0.1); color: var(--primary-color); text-decoration: none; border-radius: 8px; border: 1px solid var(--primary-color); transition: all 0.3s ease;">
                    üîê Configurar Chaves de API
                </a>
            </nav>
        </header>

        <main>
            <!-- Se√ß√£o de Upload de √Åudio -->
            <section class="card">
                <h2>üì§ Enviar Novo √Åudio</h2>
                <div class="upload-section">
                    <div class="file-input-wrapper">
                        <input type="file" id="audioFile" accept=".mp3,.wav" />
                        <label for="audioFile" class="file-label">
                            <span class="file-icon">üìÅ</span>
                            <span id="fileName">Escolher arquivo MP3 ou WAV</span>
                        </label>
                    </div>
                    
                    <div class="audio-preview" id="audioPreview" style="display: none;">
                        <audio id="audioPlayer" controls></audio>
                    </div>

                    <div class="button-group">
                        <button id="transcribeBtn" class="btn btn-primary" disabled>
                            üéØ Transcrever √Åudio
                        </button>
                        <button id="analyseBtn" class="btn btn-secondary" disabled>
                            üß† An√°lise Psicol√≥gica
                        </button>
                        <button id="emotionBtn" class="btn btn-accent" disabled>
                            üòä Detectar Emo√ß√£o
                        </button>
                        <button id="completeAnalysisBtn" class="btn btn-complete" disabled>
                            üî¨ An√°lise Completa
                        </button>
                    </div>
                    <p class="info-text" style="margin-top: 15px; font-size: 0.85rem;">
                        üí° <strong>An√°lise Completa:</strong> Executa transcri√ß√£o + detec√ß√£o de emo√ß√£o + an√°lise psicol√≥gica em uma √∫nica opera√ß√£o
                    </p>
                </div>

                <div class="result-section" id="resultSection" style="display: none;">
                    <h3>üìä Resultado</h3>
                    <div class="loading" id="loading" style="display: none;">
                        <div class="spinner"></div>
                        <p>Processando √°udio...</p>
                    </div>
                    <div id="result" class="result-content"></div>
                </div>
            </section>

            <!-- Se√ß√£o de Biblioteca de √Åudios -->
            <section class="card">
                <h2>üìö Biblioteca de √Åudios</h2>
                <p class="info-text">√Åudios dispon√≠veis na pasta "audios" do projeto</p>
                <p class="info-text" style="font-size: 0.85rem; color: var(--warning-color);">
                    ‚ö†Ô∏è Para analisar os √°udios, a API precisa estar rodando em http://localhost:5001
                </p>
                
                <div class="loading" id="libraryLoading">
                    <div class="spinner"></div>
                    <p>Carregando √°udios...</p>
                </div>

                <div id="audioLibrary" class="audio-library"></div>
            </section>
        </main>

        <footer>
            <p>FIAP - P√≥s-Gradua√ß√£o em Intelig√™ncia Artificial | 2026</p>
        </footer>
    </div>

    <script src="/frontend/script.js"></script>
</body>
</html>
